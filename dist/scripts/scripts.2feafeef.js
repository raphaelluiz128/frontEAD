"use strict";angular.module("frontEadApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","oitozero.ngSweetAlert","ui.utils.masks","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]);var app=angular.module("frontEadApp"),validacao,baseUrl="https://apiead.herokuapp.com/api/clientes";app.controller("MainCtrl",["$scope","$http","$uibModal","$rootScope",function(a,b,c,d,e){d.clientes={},b.get(baseUrl).then(function(a){d.clientes=a.data},function(a){console.log(a)});const f=function(){""==angular.element("#documentoInput").val()||""==angular.element("#dataNascimentoInput").val()||""==angular.element("#nomeInput").val()?(swal("Campos em branco"," Por favor informe todos os dados dos campos! ","warning"),validacao=0):validacao=1};a.incluir=function(){if(f(),1==validacao){var a=angular.element("#documentoInput").val().replace(/\D/g,""),c=(d.clientes.length,{nome:angular.element("#nomeInput").val(),dataNascimento:angular.element("#dataNascimentoInput").val(),documento:a,servicos:["Aplicativo Android"]});swal({title:"Deseja adicionar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sim!",cancelButtonText:"Não!",closeOnConfirm:!1},function(a){if(a){b.post(baseUrl+"/",c).then(function(a){a&&(d.clientes.push(a.data),swal("Adicionado"," Adicionado com Sucesso! ","success"))})}})}},a.remover=function(a){swal({title:"Deseja realmente excluir?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sim!",cancelButtonText:"Não!",closeOnConfirm:!1},function(c){if(c){var e=d.clientes.indexOf(a);b["delete"](baseUrl+"/delete/"+a._id).then(function(a){a&&-1!==e&&(d.clientes.splice(e,1),swal("Removido!"," Removido com Sucesso! ","success"))})}})},a.modalEditar=function(a){c.open({templateUrl:"views/editarCliente.html",controller:"editarCtrl"});sessionStorage.eCliente=JSON.stringify(a),sessionStorage.key=d.clientes.indexOf(a)}}]).controller("editarCtrl",["$scope","$uibModalInstance","$http",function(a,b,c){a.eCliente=JSON.parse(sessionStorage.eCliente),sessionStorage.idEdicao=a.eCliente._id,a.alterar=function(){var d=angular.element("#documentoInputE").val().replace(/\D/g,""),e={nome:angular.element("#nomeInputE").val(),dataNascimento:angular.element("#dataNascimentoInputE").val(),documento:d,servicos:["Aplicativo Android"]};swal({title:"Deseja realmente alterar?",type:"info",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Sim!",cancelButtonText:"Não!",closeOnConfirm:!1},function(b){b&&c.put(baseUrl+"/editar/"+sessionStorage.idEdicao,e).then(function(b){if(b)for(var c=0;c<a.clientes.length;c++)a.clientes[c]._id==sessionStorage.idEdicao&&(a.clientes[c].nome=e.nome,a.clientes[c].dataNascimento=e.dataNascimento,a.clientes[c].documento=e.documento,swal("Alterado!"," Dados alterados com Sucesso! ","success"))})}),b.close()},a.cancelar=function(){b.dismiss("cancel")}}]),angular.module("frontEadApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});var app=angular.module("frontEadApp");app.factory("validacaoDeCampos",function(){this.validacaoDeCampos=function(){return""==angular.element("#documentoInput").val()||""==angular.element("#dataNascimentoInput").val()||""==angular.element("#nomeInput").val()?(swal("Campos em branco"," Por favor informe todos os dados dos campos! ","warning"),0):1}}),angular.module("frontEadApp").run(["$templateCache",function(a){a.put("views/about.html",'<div class="jumbotron"> <h1>\'Allo, \'ahauhahu</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 testeBoilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/editarCliente.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title">Edição de clientes</h3> </div> <div class="modal-body" id="modal-body"> <table class="table table-bordered"> <thead> <tr> <th class="col-sm-5">Nome</th> <th class="col-sm-3">Data Nasc</th> <th class="col-sm-4">Documento</th> </tr> </thead> <tbody> <tr> <td><input type="text" class="form-control" id="nomeInputE" value="{{eCliente.nome}}"></td> <td><input type="text" class="form-control" id="dataNascimentoInputE" value="{{eCliente.dataNascimento}}"></td> <td><input type="text" class="form-control" id="documentoInputE" value="{{eCliente.documento}}"></td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="alterar()">Ok</button> <button class="btn btn-warning" type="button" ng-click="cancelar()">Cancelar</button> </div>'),a.put("views/main.html",'<div class="container"> <h1 class="page-header">Relação de clientes</h1> <div class="panel panel-default"> <div class="panel-heading"> Cadastro de clientes </div> <div class="panel-body"> <table class="table table-bordered"> <thead> <tr> <th class="col-sm-4">Nome</th> <th class="col-sm-2">Data Nasc</th> <th class="col-sm-3">Documento</th> <th class="col-sm-3 text-center">Ação</th> </tr> </thead> <tbody> <tr> <td><input type="text" class="form-control" id="nomeInput"></td> <td><input type="text" class="form-control" id="dataNascimentoInput" ng-model="birthDate" ui-date-mask="DD/MM/YYYY"></td> <td><input type="text" class="form-control" id="documentoInput" ng-model="initializedCpfCnpj1" ui-br-cpfcnpj-mask></td> <td class="text-center"> <button class="btn btn-sm btn-default" type="button" name="button" ng-click="incluir()"> <span class="glyphicon glyphicon-plus"></span> Incluir</button> </td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> Clientes cadastrados </div> <div class="panel-body"> <table class="table table-bordered"> <thead> <tr> <th class="col-sm-4">Nome</th> <th class="col-sm-2">Data Nasc</th> <th class="col-sm-3">Documento</th> <th class="col-sm-3 text-center">Ação</th> </tr> </thead> <tbody> <tr ng-repeat="cliente in clientes"> <td>{{cliente.nome}}</td> <td><span class="label label-default">{{cliente.dataNascimento}}</span></td> <td><span class="label label-default">{{cliente.documento}}</span></td> <td class="text-center"> <button class="btn btn-sm btn-default" ng-click="modalEditar(cliente)" type="button" name="button"> <span class="glyphicon glyphicon-pencil"></span> Editar</button> <button class="btn btn-sm btn-default" ng-click="remover(cliente)" type="button" name="button"> <span class="glyphicon glyphicon-trash"></span> Excluir</button> </td> </tr> </tbody> </table> </div> </div> </div>')}]);